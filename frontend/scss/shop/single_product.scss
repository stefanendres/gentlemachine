// builds upon shop_products.scss styles
.single-product .product {
  position: relative;
}
.single-product-image-wrapper{
  aspect-ratio: var(--ratio);
  .single-product-image {
    width: 100%;
  }
}
.single-product .product-stock-notice {
  top: calc(var(--space_0) * 4);
  right: calc(var(--space_0) * 10);
}
.product-description-container,
.summary {
  position: fixed;
  z-index: 10;
  bottom: calc(var(--space_0) * 4);
}

.product-description-container {
  width: 25%;
  left: calc(var(--space_0) * 10);
  .product-description-button {
    height: calc(var(--space_0) * 8);
    max-height: calc(var(--space_0) * 8);
    transition: opacity 0s ease-out 0.3s, max-height 0s ease-out 0.3s;
    .product-button-icon{
      height: 100%;
    }
  }
  .product-description-wrapper {
    max-height: 0;
    opacity: 0;
    overflow: clip;
    transition: opacity 0.15s ease-in-out, max-height 0.3s ease-out, background-color 0.3s ease-in-out, box-shadow 0s ease-in-out 0s, border-radius 0s ease-in-out 0.15s;
    h3, p {
      padding: 0 calc(var(--fs_m)*1.5) 0 calc(var(--fs_m)*2);
    }
    h3 {
      font-weight: 600;
      padding-top: calc(var(--fs_m)*2);
      margin-bottom: var(--fs_m);
    }
    p{
      padding-bottom: calc(var(--fs_m)*2.5);
    }
  }
  
  html.no-touchevents &:hover,
  &.is-visible {
    .product-description-button{
      max-height: calc(var(--fs_m)*2); // replace padding-top
      opacity: 0;
      pointer-events: none;
      transition: opacity 0s ease-in-out, max-height 0s ease-out;
    }
    .product-description-wrapper{
      @include pill;
      max-height: calc(var(--vp_ih) * 0.5 - var(--h_h));
      opacity: 1;
      transition: opacity 0.15s ease-in-out, max-height 0.3s ease-out, background-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, border-radius 0s ease-in-out;
    }
  }
}

.summary {
  width: 75%;
  right: calc(var(--space_0) * 10);
  display: flex;
  justify-content: flex-end;
  align-items: center;
  .product-prices {
    display: flex;
    padding: 0 calc(var(--space_0) * 2);
    .logged-in .product:not(.outofstock) & {
      padding-right: 0;
    }
    .product-price{
      display: flex;
      justify-content: center;
      align-items: center;
      @include pill;
      @include button(var(--fs_m));
      height: calc(var(--space_0) * 8);
      min-width: calc(var(--space_0) * 8);
    }
  }
  .product-tags{
    padding-top: 0;
    padding-bottom: 0;

    .product-tag-signup-link {
      max-width: 100% !important;
      &:not(:last-child){
        margin-right: calc(var(--space_0) * 2);
      }
      .product-tag-name{
        opacity: 1;
      }
    }
  }
  .variations_form {
    display: flex;
    .stock {
      display: none;
    }
    .variations{
      tbody {
        padding: 0 calc(var(--space_0) * 2);
        gap: calc(var(--space_0) * 2);
      }
      .value {
        position: relative;
        select{
          padding-right: calc(var(--fs_m)*2);
          text-align: center;
          -webkit-appearance: none;
          -moz-appearance: none;
        }
        &::after {
          content: 'â–¾';
          position: absolute;
          top: calc(var(--space_0) * 2);
          right: var(--fs_m);
          pointer-events: none;
        }
        html.no-touchevents &:hover {
          &::after {
            color: $grey_d;
          }
        }
      }
      .label,
      .reset_variations{
        display: none !important;
      }
    }
    .single_variation_wrap { // names could change for simple-products!!! (but for now variable-products are good)
      .woocommerce-variation{
        display: none !important;
      }
      .woocommerce-variation-add-to-cart{ // names could change for simple-products!!! (but for now variable-products are good)
        display: flex;
        padding-right: calc(var(--space_0) * 2);
        gap: calc(var(--space_0) * 2);
        .quantity{
          label {
            display: none;
          }
          input{
            height: calc(var(--space_0) * 8);
            min-width: calc(var(--space_0) * 8);
            max-width: calc(var(--space_0) * 8);
            padding: calc(var(--fs_m)*0.5) calc(var(--fs_m)*0.75);
            text-align: center;
            transition: max-width 0.15s ease-out;
            html.no-touchevents &:hover {
              max-width: calc(var(--space_0) * 16);
              transition: max-width 0.15s ease-out 0.15s;
              &::-webkit-outer-spin-button,
              &::-webkit-inner-spin-button{
                display: block;
              }
            }
          }
        }
        .single_add_to_cart_button{
          &.disabled{
            background-color: rgba($white, 0.6);
            box-shadow: none;
            pointer-events: none;
          }
        }
        .added_to_cart.wc-forward{
          display: none;
        }
      }
    }
  }
  .single-product-checkout-link{
    height: calc(var(--space_0) * 8);
  }
}

.single-product-back-link {
  position: absolute;
  bottom: 0;
  right: calc(var(--space_0) * 10);
  height: calc(var(--space_0) * 8);
  transform: translate3d(0, calc(var(--space_0) * -16), 0); // -8 = summary-height, -4 = summary-bottom
}


@media all and (max-width: #{$break_s}) {
  .product-images-container{
    .swiper-wrapper{ // dev!!!
      //display: flex;
      //flex-direction: row;
    }
  }
  .product-description-container{
    bottom: unset;
    top: calc(var(--h_h) + var(--space_0) * 4);
  }
  .summary {
    position: relative;
    bottom: unset;
    right: unset;
    width: 100%;
    flex-flow: row wrap;
    justify-content: center;
    .product-tags{
      padding-top: calc(var(--space_0) * 2);
      padding-bottom: calc(var(--space_0) * 2);
    }
    .variations_form {
      flex-wrap: wrap;
      .variations {
        tbody {
          flex-flow: row wrap;
          justify-content: center;
        }
      }
      .single_variation_wrap{
        width: 100%;
        .woocommerce-variation-add-to-cart{
          justify-content: center;
        }
      }
    }
  }
  .single-product-back-link {
    position: relative;
    bottom: unset;
    right: unset;
    transform: none;
  }
}